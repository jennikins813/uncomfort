<h1><%= current_user.name %>'s Page</h1>

<div class="profile">
<p> <b>Name:</b> <%= @user.name %> </p>

<p> <%= image_tag(@user.image_url, :width => 300) if @user.image.present? %> </p>

<p> <b>Email:</b><%= @user.email %> </p>

<p> <b>Comfort Bio:</b><%= @user.bio %> </p>	
</div>

<div class="tags">
	<p><b>Tags:</b>
		<%= @user.tag_list.map { |t| link_to t, tag_path(t) }.join(', ').html_safe %></p>
</div>	

<div class="friends_list">
	<h2>Friends:</h2>
	<ul>
		<% for friendship in @user.friendships %>
			<li>
				<%=h friendship.friend.name %>
				(<%= link_to "remove", friendship, method: :delete %>)
			</li>
		<% end %>	
	</ul>

	<!--<p><b> link_to "Find Friends", users_path %></b></p> -->	

	<h2>Friended by Users</h2>
	<ul>
		<% for user in @user.inverse_friends %>
			<li><%=h user.name %></li>
		<% end %>	
	</ul>

</div>

	<% if current_user %>
		<h2>Comments for <%= @user.name %></h2>

		<div id="comments">
		<% @user.comments.each do |comment| %>
			<p>
				<%= comment.comment %>
				<br>
				<% if comment.user != nil %>
					<em> by <%= comment.user.name %></em>
					Added on: <%= comment.created_at %>
				<% end %>
			</p>
		<% end %>
		</div>

		<h2>New Comments</h2>

		<%= form_for([@user, @comment]) do |f| %>

			<div id="field">
			<%= f.label :comment %><br />
			<%= f.text_area :comment %>	
			</div>

			<div id="actions">
			<%= f.submit %>	
			</div>

		<% end %>		
	<% else %>
		<p>Please <%= link_to "Log in", new_user_session_path %> to add a comment. </p>

	<% end %>

<div id="nav">
<b><%= link_to "Edit User Info", edit_user_path(current_user.id) %></b> |
<b><%= link_to "Back", root_url %></b>
</div>